(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2837:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n(7702)}])},8135:function(e,r,n){"use strict";n.d(r,{c:function(){return t}});var s=n(5893),l=n(8329),i=n(8029),o=n(4818),a=n(3265);let t=e=>{let{children:r}=e;return(0,s.jsxs)(l.k,{h:"100vh",overflow:"hidden",children:[(0,s.jsx)(o.Y,{}),(0,s.jsxs)(l.k,{direction:"column",flex:1,ml:{base:"80px",md:"280px"},children:[(0,s.jsx)(a.h,{}),(0,s.jsx)(i.x,{as:"main",flex:1,overflow:"auto",p:6,bg:"gray.50",_dark:{bg:"gray.900"},children:r})]})]})}},7702:function(e,r,n){"use strict";n.r(r);var s=n(5893),l=n(7294),i=n(1046),o=n(6254),a=n(8186),t=n(8029),d=n(232),c=n(92),u=n(6657),h=n(8843),x=n(8663),f=n(8779),m=n(3636),j=n(4032),p=n(8455),g=n(4506),v=n(980),w=n(2206),y=n(8491),_=n(4831),b=n(1716),P=n(8135);r.default=()=>{var e,r,n,C,N,S,k,I,z,U,E,W,L,G;let{user:R}=(0,b.aC)(),[q,F]=(0,l.useState)(!1),[O,T]=(0,l.useState)(null),[A,D]=(0,l.useState)(null),[X,Z]=(0,l.useState)({full_name:(null==R?void 0:null===(e=R.profile)||void 0===e?void 0:e.full_name)||"",email:(null==R?void 0:R.email)||""}),[Y,H]=(0,l.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),J=(0,i.ff)("white","gray.800"),M=(0,i.ff)("gray.200","gray.600"),B=async()=>{F(!0),D(null),T(null);try{await new Promise(e=>setTimeout(e,1e3)),T("Profile updated successfully")}catch(e){D("Failed to update profile")}finally{F(!1)}},K=async()=>{if(!Y.currentPassword||!Y.newPassword){D("Please fill in all password fields");return}if(Y.newPassword!==Y.confirmPassword){D("New passwords do not match");return}F(!0),D(null),T(null);try{await new Promise(e=>setTimeout(e,1e3)),T("Password changed successfully"),H({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){D("Failed to change password")}finally{F(!1)}};return(0,s.jsx)(P.c,{children:(0,s.jsx)(o.W,{maxW:"4xl",py:8,children:(0,s.jsxs)(a.g,{spacing:6,align:"stretch",children:[(0,s.jsxs)(t.x,{children:[(0,s.jsx)(d.X,{size:"lg",color:"brand.500",children:"Settings"}),(0,s.jsx)(c.x,{color:"gray.500",mt:1,children:"Manage your account settings and preferences"})]}),A&&(0,s.jsxs)(u.b,{status:"error",borderRadius:"md",children:[(0,s.jsx)(h.z,{}),A]}),O&&(0,s.jsxs)(u.b,{status:"success",borderRadius:"md",children:[(0,s.jsx)(h.z,{}),O]}),(0,s.jsxs)(x.Z,{bg:J,borderColor:M,borderWidth:"1px",children:[(0,s.jsx)(f.O,{children:(0,s.jsxs)(m.U,{justify:"space-between",children:[(0,s.jsxs)(t.x,{children:[(0,s.jsx)(c.x,{fontSize:"lg",fontWeight:"semibold",children:"Profile Information"}),(0,s.jsx)(c.x,{fontSize:"sm",color:"gray.500",children:"Update your personal information"})]}),(0,s.jsxs)(a.g,{spacing:1,align:"end",children:[(0,s.jsx)(j.C,{colorScheme:"blue",children:null==R?void 0:null===(r=R.profile)||void 0===r?void 0:r.auth_provider}),(0,s.jsx)(j.C,{colorScheme:(null==R?void 0:null===(n=R.profile)||void 0===n?void 0:n.role)==="admin"?"purple":"green",children:null==R?void 0:null===(N=R.profile)||void 0===N?void 0:null===(C=N.role)||void 0===C?void 0:C.toUpperCase()})]})]})}),(0,s.jsx)(p.e,{children:(0,s.jsxs)(a.g,{spacing:4,align:"stretch",children:[(0,s.jsxs)(g.NI,{children:[(0,s.jsx)(v.l,{children:"Full Name"}),(0,s.jsx)(w.I,{value:X.full_name,onChange:e=>Z({...X,full_name:e.target.value}),placeholder:"Enter your full name"})]}),(0,s.jsxs)(g.NI,{children:[(0,s.jsx)(v.l,{children:"Email Address"}),(0,s.jsx)(w.I,{value:X.email,onChange:e=>Z({...X,email:e.target.value}),placeholder:"Enter your email",isDisabled:(null==R?void 0:null===(S=R.profile)||void 0===S?void 0:S.auth_provider)==="microsoft"}),(null==R?void 0:null===(k=R.profile)||void 0===k?void 0:k.auth_provider)==="microsoft"&&(0,s.jsx)(c.x,{fontSize:"xs",color:"gray.500",mt:1,children:"Email cannot be changed for Microsoft accounts"})]}),(0,s.jsx)(y.z,{colorScheme:"brand",onClick:B,isLoading:q,loadingText:"Updating...",alignSelf:"start",children:"Update Profile"})]})})]}),(null==R?void 0:null===(I=R.profile)||void 0===I?void 0:I.auth_provider)==="local"&&(0,s.jsxs)(x.Z,{bg:J,borderColor:M,borderWidth:"1px",children:[(0,s.jsxs)(f.O,{children:[(0,s.jsx)(c.x,{fontSize:"lg",fontWeight:"semibold",children:"Change Password"}),(0,s.jsx)(c.x,{fontSize:"sm",color:"gray.500",children:"Update your account password"})]}),(0,s.jsx)(p.e,{children:(0,s.jsxs)(a.g,{spacing:4,align:"stretch",children:[(0,s.jsxs)(g.NI,{children:[(0,s.jsx)(v.l,{children:"Current Password"}),(0,s.jsx)(w.I,{type:"password",value:Y.currentPassword,onChange:e=>H({...Y,currentPassword:e.target.value}),placeholder:"Enter current password"})]}),(0,s.jsxs)(g.NI,{children:[(0,s.jsx)(v.l,{children:"New Password"}),(0,s.jsx)(w.I,{type:"password",value:Y.newPassword,onChange:e=>H({...Y,newPassword:e.target.value}),placeholder:"Enter new password"})]}),(0,s.jsxs)(g.NI,{children:[(0,s.jsx)(v.l,{children:"Confirm New Password"}),(0,s.jsx)(w.I,{type:"password",value:Y.confirmPassword,onChange:e=>H({...Y,confirmPassword:e.target.value}),placeholder:"Confirm new password"})]}),(0,s.jsx)(y.z,{colorScheme:"brand",onClick:K,isLoading:q,loadingText:"Changing...",alignSelf:"start",children:"Change Password"})]})})]}),(0,s.jsxs)(x.Z,{bg:J,borderColor:M,borderWidth:"1px",children:[(0,s.jsx)(f.O,{children:(0,s.jsx)(c.x,{fontSize:"lg",fontWeight:"semibold",children:"Account Information"})}),(0,s.jsx)(p.e,{children:(0,s.jsxs)(a.g,{spacing:3,align:"stretch",children:[(0,s.jsxs)(m.U,{justify:"space-between",children:[(0,s.jsx)(c.x,{color:"gray.600",children:"User ID"}),(0,s.jsx)(c.x,{fontFamily:"mono",fontSize:"sm",children:null==R?void 0:R.id})]}),(0,s.jsx)(_.i,{}),(0,s.jsxs)(m.U,{justify:"space-between",children:[(0,s.jsx)(c.x,{color:"gray.600",children:"Authentication Provider"}),(0,s.jsx)(j.C,{colorScheme:"blue",children:null==R?void 0:null===(z=R.profile)||void 0===z?void 0:z.auth_provider})]}),(0,s.jsx)(_.i,{}),(0,s.jsxs)(m.U,{justify:"space-between",children:[(0,s.jsx)(c.x,{color:"gray.600",children:"Role"}),(0,s.jsx)(j.C,{colorScheme:(null==R?void 0:null===(U=R.profile)||void 0===U?void 0:U.role)==="admin"?"purple":"green",children:null==R?void 0:null===(W=R.profile)||void 0===W?void 0:null===(E=W.role)||void 0===E?void 0:E.toUpperCase()})]}),(0,s.jsx)(_.i,{}),(0,s.jsxs)(m.U,{justify:"space-between",children:[(0,s.jsx)(c.x,{color:"gray.600",children:"Site Access"}),(0,s.jsxs)(c.x,{fontSize:"sm",children:[(null==R?void 0:null===(G=R.profile)||void 0===G?void 0:null===(L=G.site_ids)||void 0===L?void 0:L.length)||0," sites"]})]})]})})]})]})})})}},8455:function(e,r,n){"use strict";n.d(r,{e:function(){return t}});var s=n(5893),l=n(4926),i=n(9129),o=n(9381),a=n(7430);let t=(0,o.G)(function(e,r){let{className:n,...o}=e,t=(0,i.v)();return(0,s.jsx)(a.m.div,{ref:r,className:(0,l.cx)("chakra-card__body",n),__css:t.body,...o})})},9129:function(e,r,n){"use strict";n.d(r,{Y:function(){return l},v:function(){return i}});var s=n(6140);let[l,i]=(0,s.eC)("Card")},8779:function(e,r,n){"use strict";n.d(r,{O:function(){return t}});var s=n(5893),l=n(4926),i=n(9129),o=n(9381),a=n(7430);let t=(0,o.G)(function(e,r){let{className:n,...o}=e,t=(0,i.v)();return(0,s.jsx)(a.m.div,{ref:r,className:(0,l.cx)("chakra-card__header",n),__css:t.header,...o})})},8663:function(e,r,n){"use strict";n.d(r,{Z:function(){return c}});var s=n(5893),l=n(5544),i=n(4926),o=n(9129),a=n(9381),t=n(9653),d=n(7430);let c=(0,a.G)(function(e,r){let{className:n,children:a,direction:c="column",justify:u,align:h,...x}=(0,l.L)(e),f=(0,t.j)("Card",e);return(0,s.jsx)(d.m.div,{ref:r,className:(0,i.cx)("chakra-card",n),__css:{display:"flex",flexDirection:c,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...f.container},...x,children:(0,s.jsx)(o.Y,{value:f,children:a})})})},6254:function(e,r,n){"use strict";n.d(r,{W:function(){return d}});var s=n(5893),l=n(5544),i=n(4926),o=n(9381),a=n(9653),t=n(7430);let d=(0,o.G)(function(e,r){let{className:n,centerContent:o,...d}=(0,l.L)(e),c=(0,a.m)("Container",e);return(0,s.jsx)(t.m.div,{ref:r,className:(0,i.cx)("chakra-container",n),...d,__css:{...c,...o&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});d.displayName="Container"},980:function(e,r,n){"use strict";n.d(r,{l:function(){return c}});var s=n(5893),l=n(5544),i=n(4926),o=n(4506),a=n(9381),t=n(9653),d=n(7430);let c=(0,a.G)(function(e,r){let n=(0,t.m)("FormLabel",e),a=(0,l.L)(e),{className:c,children:h,requiredIndicator:x=(0,s.jsx)(u,{}),optionalIndicator:f=null,...m}=a,j=(0,o.NJ)(),p=j?.getLabelProps(m,r)??{ref:r,...m};return(0,s.jsxs)(d.m.label,{...p,className:(0,i.cx)("chakra-form__label",a.className),__css:{display:"block",textAlign:"start",...n},children:[h,j?.isRequired?x:f]})});c.displayName="FormLabel";let u=(0,a.G)(function(e,r){let n=(0,o.NJ)(),l=(0,o.e)();if(!n?.isRequired)return null;let a=(0,i.cx)("chakra-form__required-indicator",e.className);return(0,s.jsx)(d.m.span,{...n?.getRequiredIndicatorProps(e,r),__css:l.requiredIndicator,className:a})});u.displayName="RequiredIndicator"},232:function(e,r,n){"use strict";n.d(r,{X:function(){return d}});var s=n(5893),l=n(5544),i=n(4926),o=n(9381),a=n(9653),t=n(7430);let d=(0,o.G)(function(e,r){let n=(0,a.m)("Heading",e),{className:o,...d}=(0,l.L)(e);return(0,s.jsx)(t.m.h2,{ref:r,className:(0,i.cx)("chakra-heading",e.className),...d,__css:n})});d.displayName="Heading"}},function(e){e.O(0,[237,287,625,265,774,888,179],function(){return e(e.s=2837)}),_N_E=e.O()}]);